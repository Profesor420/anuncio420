Infusion("Component.Calendar",function(){Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(e){var t=this;if(!document.documentElement.contains(t))return null;do{if(t.matches(e))return t}while(null!==(t=t.parentElement||t.parentNode));return null});var e=Infusion.Component.Calendar,t=(e.showPopUp=function(e){var t=null,n=e.elem.closest(".infusion-calendar-wrapper");!e.elem.calendar||(t=e.elem.calendar)&&n.contains(t.el)||(t=null);null===t&&(l(e.locale),t=new Pikaday({container:n.querySelector('[id="'+e.calName+'Container"]'),field:n.querySelector('[id="'+e.textFieldName+'"]'),format:a,minDate:e.minDate,maxDate:e.maxDate,onSelect:o,yearRange:e.yearRange||100,maxYear:e.maxYear||9999}),document.getElementById(e.calName+"Container").style.display="block",e.elem.calendar=t);t&&t.show()},e.getDateFormat=function(){return a},e.setLocale=l,e.isUkDateFormat=n,"us"),a="MM-DD-YYYY";function l(e){t=e,a=n()?"DD-MM-YYYY":"MM-DD-YYYY"}function n(){return"uk"===t}function o(){var e,t=document.getElementsByTagName("html")[0];window.CustomEvent?e=new CustomEvent("calendar-date-picker-date-selected"):(e=document.createEvent("calendar-date-picker-date-selected")).initCustomEvent("calendar-date-picker-date-selected",!0,!0),t.dispatchEvent(e)}});